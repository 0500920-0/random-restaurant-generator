<!DOCTYPE html>
<html lang="zh-tw">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>臺大吃什麼？</title>

  <link rel="stylesheet" href="https://unpkg.com/ol@6.3.1/ol.css">
  <link rel="stylesheet" href="./css/index.css">
</head>
<body>

  <main>
    <section id="intro">
      <header>歡迎使用「臺大吃什麼」</header>
      <ol>
        <li>選擇隨機生成方式：預設、距離優先、自訂權重。</li>
        <ul>
          <li>距離優先 — 選擇同意使用定位功能後，確認地圖位置；若地點在兩公里以內權重會增加。</li>
          <li>自訂 — 修改好各地點權重後，選擇「權重設定完畢」。</li>
        </ul>
        <li>按右下角「吃什麼？」生成餐廳，若不滿意可繼續按。</li>
        <li>若所有地點均已產生，須點選「重置生成器」重置。</li>
      </ol>
    </section>

    <section id="randomBox">
      <header id="randomResult">📍 請按右下角</header>
      <button id="reset" class="btn">重置生成器</button>
      <!-- <a id="showMap" class="btn" href="#map">顯示地圖</a> -->
    </section>

    <section id="probability">
      <header>各地點出現機率</header>
      <div class="description">註：若選擇「距離優先」，須要使用手機的定位系統。</div>
      <form name="randomType" id="randomTypeRadio" class="randomTypeRadio">
        <input type="radio" name="randomType" value="default" id="randomDefault" checked>
        <label for="randomDefault">預設</label>

        <input type="radio" name="randomType" value="nearest" id="randomNearest">
        <label for="randomNearest">距離優先</label>

        <input type="radio" name="randomType" value="user" id="randomUser">
        <label for="randomUser">自訂</label>
      </form>
      <form name="weight" id="weight">
        <table id="probabilityList" class="probabilityList">
          <thead>
            <tr><th id="nameTitle" class="name" colspan="2">地點</th></tr>
          </thead>
          <tbody>
            <tr><td class="description" colspan="2">載入中，請稍候……</td></tr>
          </tbody>
        </table>
      </form>
    </section>

    <section id="map">
      <header>地圖</header>
      <div class="description">由 OpenStreetMap 提供。</div>
      <div id="olmap"></div>
    </section>

  </main>
  <button id="fab" class="fab">🤤 吃什麼？</button>
  
  <script nomodule>document.getElementById('probability').append('這個瀏覽器似乎不支援 module……');</script>
  <script>
    window.addEventListener('error', function (message, source, lineno, colno, error) {
      document.getElementById('probability').append('錯誤：', message, ' (', source, ':', lineno, '/', colno, ')');
    });
  </script>
  <script src="./js/index.js" type="module"></script>
</body>
</html>
